---
import Layout from '../layouts/Layout.astro'
import Hero from '../components/Hero.astro'
import Section from '../components/Section.astro'
import ProjectCard from '../components/ProjectCard.astro'
import BlogCard from '../components/BlogCard.astro'
import SocialIcons from '../components/SocialIcons.astro'
import { samplePapers } from '../data/papers'
import { sampleProjects } from '../data/projects'

const latestPapers = [...samplePapers].sort((a, b) => b.year - a.year).slice(0, 3)
const featuredProjects = [...sampleProjects].sort((a, b) => b.year - a.year).slice(0, 3)
---

<Layout>
	<Hero
		title="A Scientist Wannabe"
		subtitle="I'm Berk Buzcu. I feel like a scientist of some. This site is a work-in-progress with placeholder content."
		ctaText="Get in touch"
		ctaHref="/contact"
	/>

	<Section title="Featured Projects" description="A few recent things.">
		<div class="grid">
			{featuredProjects.map((p) => (
				<ProjectCard title={p.title} description={p.description} year={p.year} image={p.image} tech={p.tech} link={p.link} />
			))}
		</div>
	</Section>

	<Section title="Latest Papers" description="Most recent publications.">
		<ul class="paper-list">
			{latestPapers.map((p) => (
				<li class="paper-item">
					<div class="paper-head">
						{p.doi ? <a href={`https://doi.org/${p.doi}`} target="_blank" rel="noopener">{p.title}</a> : p.title}
						<span class="year">{p.year}</span>
					</div>
					<div class="paper-meta">{p.venue ?? '—'}</div>
					{p.keywords && p.keywords.length > 0 && (
						<ul class="keywords">
							{p.keywords.map((k) => <li>{k}</li>)}
						</ul>
					)}
				</li>
			))}
		</ul>
		<p><a href="/papers">View all papers →</a></p>
	</Section>

	<Section title="Latest Writing" description="Short previews from placeholder posts.">
		<div class="grid">
			<BlogCard title="Hello World" excerpt="Lorem ipsum dolor sit amet, consectetur adipiscing elit." date="2024-07-01" url="/blog/hello-world" />
			<BlogCard title="Thoughts on Design" excerpt="Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua." date="2024-08-15" url="/blog/thoughts-on-design" />
			<BlogCard title="Engineering Notes" excerpt="Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris." date="2024-09-10" url="/blog/engineering-notes" />
		</div>
	</Section>

	<Section title="Elsewhere">
		<SocialIcons github="https://github.com/berkbuzcu" linkedin="https://linkedin.com/in/" x="https://x.com/" email="hi@example.com" />
	</Section>
</Layout>

<style>
	.grid {
		display: grid;
		grid-template-columns: repeat(3, minmax(0, 1fr));
		gap: 16px;
	}

	@media (max-width: 900px) {
		.grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
	}

	@media (max-width: 600px) {
		.grid { grid-template-columns: 1fr; }
	}

	.paper-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 12px; }
	.paper-item { border: 1px solid var(--border); border-radius: 12px; padding: 12px; background: var(--surface); }
	.paper-head { display: flex; justify-content: space-between; align-items: baseline; gap: 12px; font-weight: 700; }
	.paper-head a { color: var(--text); text-decoration: none; }
	.paper-meta { color: var(--muted); font-size: .95em; margin-top: 4px; }
	.year { color: var(--muted); font-weight: 600; }
	.keywords { display: flex; flex-wrap: wrap; gap: 8px; margin: 8px 0 0; padding: 0; list-style: none; }
	.keywords li { padding: 3px 8px; border: 1px solid var(--border); border-radius: 999px; font-size: 12px; }
</style>
