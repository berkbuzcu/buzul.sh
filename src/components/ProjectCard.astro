---
export interface Props {
	title: string
	description: string
	year?: number | string
	image?: string
	tech?: string[]
	link?: string
}
const { title, description, year, image, tech = [], link = '#' } = Astro.props as Props
---


<article class="card">
	<div class="body">
		<h3>{title}</h3>
		{year && <div class="year">{year}</div>}
		<p class="desc">{description}</p>
	</div>
	{image && (
		<div class="media">
			<img src={image} alt={title} loading="lazy" />
		</div>
	)}
	{tech.length > 0 && (
		<ul class="tech">
			{tech.map((t) => <li>{t}</li>)}
		</ul>
	)}
	<a class="visit" href={link} target="_blank" rel="noopener">View</a>
</article>

<style>
	.card {
		display: grid;
		grid-template-columns: 1fr auto;
		gap: 16px;
		padding: 16px;
		border: 1px solid var(--border);
		border-radius: 12px;
		background: var(--surface);
	}

	.media { grid-column: 1 / -1; border-radius: 10px; overflow: hidden; border: 1px solid var(--border); background: #0f1020; display: flex; align-items: center; justify-content: center; padding: 12px; }
	.media img { width: 100%; height: 180px; object-fit: contain; display: block; }

	h3 { margin: 0 0 6px; font-size: 18px; }
    .year { color: var(--muted); font-size: 12px; margin: -2px 0 6px; }
	.desc { margin: 0; color: var(--muted); }
	.tech { display: flex; flex-wrap: wrap; gap: 8px; margin: 6px 0 0; padding: 0; list-style: none; grid-column: 1 / -1; height: 48px; overflow: hidden; }
	.tech li {
		padding: 4px 8px;
		border-radius: 6px;
		background: rgba(124,92,255,0.1);
		border: 1px solid var(--border);
		font-size: 12px;
		line-height: 1;
		color: var(--text);
	}

	.visit { align-self: start; text-decoration: none; color: var(--primary-contrast); background: var(--primary); padding: 8px 10px; border-radius: 8px; font-weight: 600; }
</style>

